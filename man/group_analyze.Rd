% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/layers.R
\name{group_analyze}
\alias{group_analyze}
\title{Create a custom analysis layer}
\usage{
group_analyze(
  target_var,
  by = NULL,
  where = NULL,
  analyze_fn,
  settings = layer_settings()
)
}
\arguments{
\item{target_var}{Character string naming the target variable(s)}

\item{by}{Character string or vector for row grouping}

\item{where}{Expression for filtering data for this layer}

\item{analyze_fn}{A function with signature \code{function(.data, .target_var)}
that returns a data.frame. See Details.}

\item{settings}{A layer_settings object}
}
\value{
A tplyr_analyze_layer object
}
\description{
Allows a user-defined function to compute summary statistics. The function
receives a data subset and the target variable name for each group
combination, and returns a data.frame of results.
}
\details{
The \code{analyze_fn} is called once per group combination (defined by
\code{cols} and \code{by} data variables). It receives:
\itemize{
\item \code{.data}: A data.frame subset for the current group
\item \code{.target_var}: Character string with the target variable name(s)
}

If \code{format_strings} are provided in settings, \code{analyze_fn} should
return a single-row data.frame of named numeric values. Each format string
entry becomes one output row, with its name used as the row label.

If no \code{format_strings} are provided, \code{analyze_fn} must return a
data.frame with \code{row_label} and \code{formatted} columns.
}
